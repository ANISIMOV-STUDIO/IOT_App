<!DOCTYPE html>
<html lang="ru">
<head>
  <!--
    If you are serving your web app in a path other than the root, change the
    href value below to reflect the base path you are serving from.

    The path provided below has to start and end with a slash "/" in order for
    it to work correctly.

    For more details:
    * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base

    This is a placeholder for base href that will be replaced by the value of
    the `--base-href` argument provided to `flutter build`.
  -->
  <base href="$FLUTTER_BASE_HREF">

  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">

  <!-- Primary Meta Tags -->
  <title>BREEZ Home - Умное управление вентиляцией ZILON</title>
  <meta name="title" content="BREEZ Home - Умное управление вентиляцией ZILON">
  <meta name="description" content="BREEZ Home - Умное управление вентиляционными системами ZILON. Контролируйте ваши устройства из любого места с мониторингом в реальном времени.">
  <meta name="keywords" content="BREEZ, ZILON, вентиляция, умный дом, качество воздуха, климат-контроль, IoT">
  <meta name="author" content="BREEZ">
  <meta name="robots" content="index, follow">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://breez-home.app/">
  <meta property="og:title" content="BREEZ Home - Умное управление вентиляцией ZILON">
  <meta property="og:description" content="BREEZ Home - Умное управление вентиляционными системами ZILON. Контролируйте ваши устройства из любого места.">
  <meta property="og:image" content="icons/Icon-512.png">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://breez-home.app/">
  <meta property="twitter:title" content="BREEZ Home - Умное управление вентиляцией ZILON">
  <meta property="twitter:description" content="BREEZ Home - Умное управление вентиляционными системами ZILON. Контролируйте ваши устройства из любого места.">
  <meta property="twitter:image" content="icons/Icon-512.png">

  <!-- iOS meta tags & icons -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="BREEZ Home">
  <link rel="apple-touch-icon" href="icons/Icon-192.png">
  <link rel="apple-touch-icon" sizes="192x192" href="icons/Icon-192.png">
  <link rel="apple-touch-icon" sizes="512x512" href="icons/Icon-512.png">

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="favicon.svg"/>
  <link rel="icon" type="image/png" sizes="32x32" href="favicon.png"/>
  <link rel="icon" type="image/png" sizes="16x16" href="favicon.png"/>

  <!-- Theme Color -->
  <meta name="theme-color" content="#FF9D5C" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#0A0E27" media="(prefers-color-scheme: dark)">

  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">

  <!-- Preconnect for performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="dns-prefetch" href="https://fonts.googleapis.com">

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-messaging-compat.js"></script>

  <!-- This script adds the flutter initialization JS code -->
  <script src="flutter_bootstrap.js" async></script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      background: #000D1A;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      overflow: hidden;
    }

    /* Loading screen - Dark theme */
    .loading {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: #000D1A;
      z-index: 9999;
      overflow: hidden;
    }

    /* Ambient glow effect */
    .loading::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 600px;
      height: 600px;
      transform: translate(-50%, -50%);
      background: radial-gradient(circle,
        rgba(45, 125, 255, 0.15) 0%,
        rgba(45, 125, 255, 0.05) 40%,
        transparent 70%);
      animation: ambientPulse 4s ease-in-out infinite;
      pointer-events: none;
    }

    @keyframes ambientPulse {
      0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.6; }
      50% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
    }

    /* Logo container */
    .logo-container {
      position: relative;
      margin-bottom: 48px;
      z-index: 10;
    }

    /* Outer spinning ring */
    .loader-ring {
      width: 140px;
      height: 140px;
      border-radius: 50%;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Spinning arc */
    .loader-ring::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 50%;
      border: 2px solid rgba(255, 255, 255, 0.05);
    }

    .loader-ring::after {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 50%;
      border: 2px solid transparent;
      border-top-color: #2D7DFF;
      border-right-color: rgba(45, 125, 255, 0.5);
      animation: spin 1.2s linear infinite;
      filter: drop-shadow(0 0 8px rgba(45, 125, 255, 0.5));
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Inner logo area */
    .logo-inner {
      width: 110px;
      height: 110px;
      border-radius: 50%;
      background: #0F1D2E;
      border: 1px solid rgba(255, 255, 255, 0.05);
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    /* SVG Logo */
    .logo-svg {
      width: 65px;
      height: 65px;
      animation: logoPulse 2s ease-in-out infinite;
    }

    .logo-svg path {
      fill: #2D7DFF;
    }

    @keyframes logoPulse {
      0%, 100% { opacity: 0.8; filter: drop-shadow(0 0 4px rgba(45, 125, 255, 0.3)); }
      50% { opacity: 1; filter: drop-shadow(0 0 12px rgba(45, 125, 255, 0.6)); }
    }

    /* Loading bar */
    .loading-bar-container {
      width: 200px;
      height: 4px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 2px;
      overflow: hidden;
      margin-bottom: 24px;
    }

    .loading-bar {
      height: 100%;
      width: 40%;
      background: linear-gradient(90deg, #2D7DFF, #5B9AFF);
      border-radius: 2px;
      animation: loadingBar 1.5s ease-in-out infinite;
      box-shadow: 0 0 10px rgba(45, 125, 255, 0.5);
    }

    @keyframes loadingBar {
      0% { transform: translateX(-100%); }
      50% { transform: translateX(150%); }
      100% { transform: translateX(400%); }
    }

    /* Loading text */
    .loading-text {
      color: rgba(255, 255, 255, 0.4);
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 3px;
      text-transform: uppercase;
    }

    /* Decorative corner lines */
    .corner-line {
      position: absolute;
      background: linear-gradient(90deg, rgba(45, 125, 255, 0.3), transparent);
      height: 1px;
      pointer-events: none;
    }

    .corner-line-1 {
      top: 15%;
      left: 0;
      width: 120px;
      animation: lineFade 3s ease-in-out infinite;
    }

    .corner-line-2 {
      bottom: 15%;
      right: 0;
      width: 150px;
      background: linear-gradient(270deg, rgba(45, 125, 255, 0.3), transparent);
      animation: lineFade 3s ease-in-out infinite 1s;
    }

    .corner-line-3 {
      top: 35%;
      left: 0;
      width: 80px;
      opacity: 0.5;
      animation: lineFade 3s ease-in-out infinite 0.5s;
    }

    .corner-line-4 {
      bottom: 35%;
      right: 0;
      width: 100px;
      background: linear-gradient(270deg, rgba(45, 125, 255, 0.2), transparent);
      animation: lineFade 3s ease-in-out infinite 1.5s;
    }

    @keyframes lineFade {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 0.8; }
    }

    /* Status dots */
    .status-dots {
      position: absolute;
      bottom: 40px;
      display: flex;
      gap: 8px;
    }

    .status-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: rgba(45, 125, 255, 0.3);
      animation: dotPulse 1.5s ease-in-out infinite;
    }

    .status-dot:nth-child(1) { animation-delay: 0s; }
    .status-dot:nth-child(2) { animation-delay: 0.2s; }
    .status-dot:nth-child(3) { animation-delay: 0.4s; }

    @keyframes dotPulse {
      0%, 100% { background: rgba(45, 125, 255, 0.3); transform: scale(1); }
      50% { background: #2D7DFF; transform: scale(1.2); }
    }

    /* Responsive */
    @media (max-width: 768px) {
      .loader-ring {
        width: 120px;
        height: 120px;
      }

      .logo-inner {
        width: 95px;
        height: 95px;
      }

      .logo-svg {
        width: 55px;
        height: 55px;
      }

      .loading-bar-container {
        width: 160px;
      }

      .loading-text {
        font-size: 10px;
        letter-spacing: 2px;
      }

      .corner-line { display: none; }
    }
  </style>
</head>
<body>
  <!-- Loading Screen -->
  <div class="loading" id="loading">
    <!-- Decorative lines -->
    <div class="corner-line corner-line-1"></div>
    <div class="corner-line corner-line-2"></div>
    <div class="corner-line corner-line-3"></div>
    <div class="corner-line corner-line-4"></div>

    <!-- Logo with spinning ring -->
    <div class="logo-container">
      <div class="loader-ring">
        <div class="logo-inner">
          <svg class="logo-svg" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M19.7718 38.2255L20.0148 38.2842C22.2015 38.857 24.4582 39.1168 26.7178 39.0557V39.0557C32.65 39.0557 41.1125 37.823 51.8541 35.408C54.3258 34.8545 68 31.5674 70.765 30.8714C95.8092 24.5823 114.175 24.0205 114.335 24.0121L115.625 23.836L115.298 21.7396C114.81 18.4632 113.481 15.3695 111.441 12.7607C109.402 10.1519 106.721 8.11725 103.66 6.85539C100.091 5.53546 96.3031 4.90933 92.4996 5.01058C86.2658 5.01058 78.3813 6.20132 68.4022 8.65827L67.2794 8.93499C63.1906 9.93287 52.3317 12.5995 50.0108 13.2451C27.6227 19.4756 5 20.3728 5 20.3728L5.31837 22.4021C5.91181 26.1674 7.59837 29.6749 10.1682 32.4883C12.738 35.3018 16.0777 37.2969 19.7718 38.2255V38.2255Z"/>
            <path d="M103.683 44.9014C100.114 43.5951 96.3253 42.9752 92.5212 43.0748C86.2781 43.0748 78.4008 44.2538 68.4118 46.6864L67.2973 46.9604C63.2078 47.9484 52.3473 50.5886 50.0176 51.2279C27.6345 57.3967 5 58.2602 5 58.2602L5.31842 60.2943C5.91153 64.0238 7.59923 67.498 10.1712 70.2839C12.7432 73.0698 16.0857 75.0443 19.7824 75.9613L20.017 76.0194C22.2043 76.5854 24.4612 76.8426 26.7211 76.7832C32.6458 76.7832 41.118 75.5628 51.8612 73.1716C54.2998 72.6236 67.9844 69.369 70.7666 68.6799C95.8229 62.453 114.184 61.8967 114.343 61.8884L115.625 61.7058L115.298 59.6384C114.812 56.3974 113.486 53.3364 111.451 50.7538C109.415 48.1712 106.739 46.1549 103.683 44.9014V44.9014Z"/>
            <path d="M103.623 82.6472C100.055 81.3264 96.2686 80.7003 92.4665 80.8024C86.235 80.8024 78.3535 81.9931 68.3782 84.45L67.013 84.7855C62.599 85.8672 52.2719 88.408 49.9938 89.0369C27.6225 95.2673 5 96.1561 5 96.1561L5.31825 98.1938C5.91147 101.959 7.59739 105.467 10.1663 108.28C12.7351 111.093 16.0735 113.089 19.7662 114.017L20.0091 114.076C22.1949 114.649 24.4509 114.908 26.7096 114.847V114.847C32.6395 114.847 41.0989 113.615 51.8364 111.2C54.2988 110.646 67.9762 107.359 70.7401 106.663C95.7748 100.374 114.134 99.8122 114.293 99.8038L115.625 99.6361L115.298 97.5146C114.802 94.2372 113.466 91.1447 111.419 88.5389C109.373 85.9332 106.687 83.9032 103.623 82.6472V82.6472Z"/>
          </svg>
        </div>
      </div>
    </div>

    <!-- Loading bar -->
    <div class="loading-bar-container">
      <div class="loading-bar"></div>
    </div>

    <!-- Text -->
    <div class="loading-text">Загрузка</div>

    <!-- Status dots -->
    <div class="status-dots">
      <div class="status-dot"></div>
      <div class="status-dot"></div>
      <div class="status-dot"></div>
    </div>
  </div>

  <script>
    // Скрыть экран загрузки когда Flutter приложение загружено
    window.addEventListener('flutter-first-frame', function() {
      const loading = document.getElementById('loading');
      if (loading) {
        loading.style.opacity = '0';
        loading.style.transition = 'opacity 0.3s ease';
        setTimeout(() => loading.remove(), 300);
      }
    });

    // Регистрация Service Worker для Firebase Messaging (push уведомления)
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker.register('/firebase-messaging-sw.js')
          .then(function(registration) {
            console.log('Firebase Messaging SW зарегистрирован:', registration.scope);
          })
          .catch(function(error) {
            console.log('Ошибка регистрации Firebase Messaging SW:', error);
          });
      });
    }
  </script>
</body>
</html>
